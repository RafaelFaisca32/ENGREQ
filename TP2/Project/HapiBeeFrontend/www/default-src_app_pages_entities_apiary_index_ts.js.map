{"version":3,"file":"default-src_app_pages_entities_apiary_index_ts.js","mappings":"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","sources":["./src/app/pages/entities/apiary/apiary-detail.ts","./src/app/pages/entities/apiary/apiary.model.ts","./src/app/pages/entities/apiary/apiary.service.ts","./src/app/pages/entities/apiary/apiary.ts","./src/app/pages/entities/apiary/index.ts","./src/app/pages/entities/hive/hive.service.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Apiary } from './apiary.model';\r\nimport { ApiaryService } from './apiary.service';\r\nimport { NavController, AlertController } from '@ionic/angular';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'page-apiary-detail',\r\n  templateUrl: 'apiary-detail.html',\r\n})\r\nexport class ApiaryDetailPage implements OnInit {\r\n  apiary: Apiary = {};\r\n\r\n  constructor(\r\n    private navController: NavController,\r\n    private apiaryService: ApiaryService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private alertController: AlertController\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.activatedRoute.data.subscribe(response => {\r\n      this.apiary = response.data;\r\n    });\r\n  }\r\n\r\n  open(item: Apiary) {\r\n    this.navController.navigateForward('/tabs/entities/apiary/' + item.id + '/edit');\r\n  }\r\n\r\n  async deleteModal(item: Apiary) {\r\n    const alert = await this.alertController.create({\r\n      header: 'Confirm the deletion?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n        },\r\n        {\r\n          text: 'Delete',\r\n          handler: () => {\r\n            this.apiaryService.delete(item.id).subscribe(() => {\r\n              this.navController.navigateForward('/tabs/entities/apiary');\r\n            });\r\n          },\r\n        },\r\n      ],\r\n    });\r\n    await alert.present();\r\n  }\r\n}\r\n","import { BaseEntity } from 'src/model/base-entity';\r\nimport { Hive } from '../hive/hive.model';\r\nimport { TranshumanceRequest } from '../transhumance-request/transhumance-request.model';\r\n\r\nexport const enum ApiaryState {\r\n  'NOT_APPROVED',\r\n  'APPROVED',\r\n  'PENDING',\r\n}\r\n\r\nexport class Apiary implements BaseEntity {\r\n  constructor(\r\n    public id?: number,\r\n    public name?: string,\r\n    public state?: ApiaryState,\r\n    public number?: number,\r\n    public intensive?: boolean,\r\n    public transhumance?: boolean,\r\n    public zoneundefined?: string,\r\n    public zoneId?: number,\r\n    public beekeeperundefined?: string,\r\n    public beekeeperId?: number,\r\n    public hives?: Hive[],\r\n    public transhumanceRequests?: TranshumanceRequest[]\r\n  ) {\r\n    this.intensive = false;\r\n    this.transhumance = false;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpResponse } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { ApiService } from '../../../services/api/api.service';\r\nimport { createRequestOption } from '../../../shared';\r\nimport { Apiary } from './apiary.model';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ApiaryService {\r\n  private resourceUrl = ApiService.API_URL + '/apiaries';\r\n\r\n  constructor(protected http: HttpClient) {}\r\n\r\n  create(apiary: Apiary): Observable<HttpResponse<Apiary>> {\r\n    return this.http.post<Apiary>(this.resourceUrl, apiary, { observe: 'response' });\r\n  }\r\n\r\n  update(apiary: Apiary): Observable<HttpResponse<Apiary>> {\r\n    return this.http.put(`${this.resourceUrl}/${apiary.id}`, apiary, { observe: 'response' });\r\n  }\r\n\r\n  find(id: number): Observable<HttpResponse<Apiary>> {\r\n    return this.http.get(`${this.resourceUrl}/${id}`, { observe: 'response' });\r\n  }\r\n\r\n  query(req?: any): Observable<HttpResponse<Apiary[]>> {\r\n    const options = createRequestOption(req);\r\n    return this.http.get<Apiary[]>(this.resourceUrl, { params: options, observe: 'response' });\r\n  }\r\n\r\n  delete(id: number): Observable<HttpResponse<any>> {\r\n    return this.http.delete<any>(`${this.resourceUrl}/${id}`, { observe: 'response' });\r\n  }\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { NavController, ToastController, Platform, IonItemSliding } from '@ionic/angular';\r\nimport { filter, map } from 'rxjs/operators';\r\nimport { HttpResponse } from '@angular/common/http';\r\nimport { Apiary } from './apiary.model';\r\nimport { ApiaryService } from './apiary.service';\r\nimport { NavigationExtras, Router, ActivatedRoute } from \"@angular/router\";\r\nimport { HiveService } from \"../hive/hive.service\";\r\nimport { Hive } from \"../hive\";\r\n\r\n@Component({\r\n  selector: 'page-apiary',\r\n  templateUrl: 'apiary.html',\r\n})\r\nexport class ApiaryPage {\r\n  apiaries: Apiary[];\r\n  from: String;\r\n\r\n  // todo: add pagination\r\n\r\n  constructor(\r\n    private navController: NavController,\r\n    private apiaryService: ApiaryService,\r\n    private hiveService: HiveService,\r\n    private toastCtrl: ToastController,\r\n    public plt: Platform,\r\n    private route: ActivatedRoute,\r\n    private router: Router\r\n  ) {\r\n    this.apiaries = [];\r\n\r\n    this.route.queryParams.subscribe(params => {\r\n      this.from = params.from\r\n      if (this.router.getCurrentNavigation().extras.state) {\r\n        //this.from = this.router.getCurrentNavigation().extras.state.from;\r\n        //console.log(this.from)\r\n      }\r\n    });\r\n  }\r\n\r\n  async ionViewWillEnter() {\r\n    await this.loadAll();\r\n  }\r\n\r\n  async loadAll(refresher?) {\r\n    let req;\r\n    let beekeeperId = localStorage.getItem(\"beekeeperId\")\r\n\r\n    switch(this.from){\r\n      case 'createCrest':\r\n      case 'createUnfolding':\r\n      case 'createInspection':\r\n        req = {  'state.equals' : 'APPROVED'  };\r\n        if(!!beekeeperId){\r\n          req = {  'state.equals' : 'APPROVED',\r\n          'beekeeperId.equals' : beekeeperId  };\r\n        }\r\n\r\n        break;\r\n      default:\r\n        if(!!beekeeperId){\r\n          req = {  'beekeeperId.equals' : beekeeperId };\r\n        }\r\n    }\r\n\r\n    this.apiaryService\r\n      .query(req)\r\n      .pipe(\r\n        filter((res: HttpResponse<Apiary[]>) => res.ok),\r\n        map((res: HttpResponse<Apiary[]>) => res.body)\r\n      )\r\n      .subscribe(\r\n        (response: Apiary[]) => {\r\n          this.apiaries = [];\r\n          let apiariesAux = response;\r\n\r\n          if (this.from == \"createUnfolding\" || this.from == \"createCrest\" || this.from == \"createInspection\"){\r\n            for(let i=0;i<apiariesAux.length;i++){\r\n              this.hiveService\r\n                .query({ 'apiaryId.equals' : apiariesAux[i].id})\r\n                .pipe(\r\n                  filter((res: HttpResponse<Hive[]>) => res.ok),\r\n                  map((res: HttpResponse<Hive[]>) => res.body)\r\n                )\r\n                .subscribe(\r\n                  (responseHives: Hive[]) => {\r\n                    if (responseHives.length>0){\r\n                      this.apiaries.push(apiariesAux[i]);\r\n                    }\r\n                  },\r\n                )\r\n            }\r\n          } else {\r\n            this.apiaries = apiariesAux;\r\n          }\r\n\r\n          if (typeof refresher !== 'undefined') {\r\n            setTimeout(() => {\r\n              refresher.target.complete();\r\n            }, 750);\r\n          }\r\n        },\r\n        async error => {\r\n          console.error(error);\r\n          const toast = await this.toastCtrl.create({ message: 'Failed to load data', duration: 2000, position: 'middle' });\r\n          await toast.present();\r\n        }\r\n      );\r\n  }\r\n\r\n  trackId(index: number, item: Apiary) {\r\n    return item.id;\r\n  }\r\n\r\n  async new() {\r\n    await this.navController.navigateForward('/tabs/entities/apiary/new');\r\n  }\r\n\r\n  async edit(item: IonItemSliding, apiary: Apiary) {\r\n    await this.navController.navigateForward('/tabs/entities/apiary/' + apiary.id + '/edit');\r\n    await item.close();\r\n  }\r\n\r\n  async delete(apiary) {\r\n    this.apiaryService.delete(apiary.id).subscribe(\r\n      async () => {\r\n        const toast = await this.toastCtrl.create({ message: 'Apiary deleted successfully.', duration: 3000, position: 'middle' });\r\n        await toast.present();\r\n        await this.loadAll();\r\n      },\r\n      error => console.error(error)\r\n    );\r\n  }\r\n\r\n  async view(apiary: Apiary) {\r\n    let navigationExtras : NavigationExtras;\r\n    switch(this.from){\r\n      case 'createCrest':\r\n        navigationExtras = { state : { apiaryId: apiary.id }, queryParams : { apiaryId: apiary.id  } }\r\n        await this.navController.navigateForward('/tabs/entities/crest/new' , navigationExtras);\r\n        break;\r\n      case 'createUnfolding':\r\n        navigationExtras  = { state : { apiaryId: apiary.id }, queryParams : { apiaryId: apiary.id, from: 'createUnfolding' } }\r\n        await this.navController.navigateForward('/tabs/entities/unfolding/new' , navigationExtras);\r\n        break;\r\n      case 'createInspection':\r\n        navigationExtras  = { state : { apiaryId: apiary.id }, queryParams : { apiaryId: apiary.id, from: 'createUnfolding' } }\r\n        await this.navController.navigateForward('/tabs/entities/inspection/new' , navigationExtras);\r\n        break;\r\n      default:\r\n        await this.navController.navigateForward('/tabs/entities/apiary/' + apiary.id + '/view');\r\n    }\r\n  }\r\n\r\n  async isToCreate(){\r\n    return this.from == \"\" || this.from == null || this.from == undefined || this.from == \"new\";\r\n  }\r\n}\r\n","export * from './apiary.model';\r\nexport * from './apiary.service';\r\nexport * from './apiary-detail';\r\nexport * from './apiary';\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpResponse } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { ApiService } from '../../../services/api/api.service';\r\nimport { createRequestOption } from '../../../shared';\r\nimport { Hive } from './hive.model';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class HiveService {\r\n  private resourceUrl = ApiService.API_URL + '/hives';\r\n\r\n  constructor(protected http: HttpClient) {}\r\n\r\n  create(hive: Hive): Observable<HttpResponse<Hive>> {\r\n    return this.http.post<Hive>(this.resourceUrl, hive, { observe: 'response' });\r\n  }\r\n\r\n  update(hive: Hive): Observable<HttpResponse<Hive>> {\r\n    return this.http.put(`${this.resourceUrl}/${hive.id}`, hive, { observe: 'response' });\r\n  }\r\n\r\n  find(id: number): Observable<HttpResponse<Hive>> {\r\n    return this.http.get(`${this.resourceUrl}/${id}`, { observe: 'response' });\r\n  }\r\n\r\n  query(req?: any): Observable<HttpResponse<Hive[]>> {\r\n    const options = createRequestOption(req);\r\n    return this.http.get<Hive[]>(this.resourceUrl, { params: options, observe: 'response' });\r\n  }\r\n\r\n  delete(id: number): Observable<HttpResponse<any>> {\r\n    return this.http.delete<any>(`${this.resourceUrl}/${id}`, { observe: 'response' });\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}
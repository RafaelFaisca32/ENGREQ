{"version":3,"file":"src_app_pages_signup_signup_module_ts.js","mappings":"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","sources":["./src/app/pages/signup/signup.module.ts","./src/app/pages/signup/signup.page.ts"],"sourcesContent":["import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Routes } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SignupPage } from './signup.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SignupPage,\n  }\n];\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, RouterModule.forChild(routes), TranslateModule],\n  declarations: [SignupPage],\n})\nexport class SignupPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavController, ToastController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { UserService } from '../../services/user/user.service';\n\n@Component({\n  selector: 'app-signup',\n  templateUrl: './signup.page.html',\n  styleUrls: ['./signup.page.scss'],\n})\nexport class SignupPage implements OnInit {\n  // The account fields for the signup form\n  account: {\n    login: string;\n    email: string;\n    firstName: string;\n    lastName: string;\n    password: string;\n    langKey: string;\n    rgpd: boolean;\n  } = {\n    login: '',\n    email: '',\n    firstName: '',\n    lastName: '',\n    password: '',\n    langKey: 'en',\n    rgpd: false\n  };\n\n  // Our translated text strings\n  private signupErrorString: string;\n  private signupSuccessString: string;\n  private existingUserError: string;\n  private invalidPasswordError: string;\n\n  constructor(\n    public navController: NavController,\n    public userService: UserService,\n    public toastController: ToastController,\n    public translateService: TranslateService\n  ) {\n    this.translateService.get(['SIGNUP_ERROR', 'SIGNUP_SUCCESS', 'EXISTING_USER_ERROR', 'INVALID_PASSWORD_ERROR']).subscribe(values => {\n      this.signupErrorString = values.SIGNUP_ERROR;\n      this.signupSuccessString = values.SIGNUP_SUCCESS;\n      this.existingUserError = values.EXISTING_USER_ERROR;\n      this.invalidPasswordError = values.INVALID_PASSWORD_ERROR;\n    });\n  }\n\n  ngOnInit() {}\n\n  termsAndConditions(){\n    this.navController.navigateForward('/signup/terms-conditions');\n  }\n\n  async doSignup() {\n    // set login to same as email\n    this.account.login = this.account.email;\n    // Attempt to login in through our User service\n\n    if(!this.account.rgpd){\n      const toast = await this.toastController.create({\n        message: \"Tem que aceitar os termos e condições para se registar na aplicação.\",\n        duration: 3000,\n        position: 'middle',\n      });\n      toast.present();\n      return;\n    }\n\n    this.userService.signup(this.account).subscribe(\n      async () => {\n        const toast = await this.toastController.create({\n          message: this.signupSuccessString,\n          duration: 3000,\n          position: 'top',\n        });\n        toast.present();\n      },\n      async response => {\n        // Unable to sign up\n        const error = JSON.parse(response.error);\n        let displayError = this.signupErrorString;\n        if (response.status === 400 && error.type.includes('already-used')) {\n          displayError = this.existingUserError;\n        } else if (\n          response.status === 400 &&\n          error.message === 'error.validation' &&\n          error.fieldErrors[0].field === 'password' &&\n          error.fieldErrors[0].message === 'Size'\n        ) {\n          displayError = this.invalidPasswordError;\n        }\n        const toast = await this.toastController.create({\n          message: displayError,\n          duration: 3000,\n          position: 'middle',\n        });\n        toast.present();\n      }\n    );\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}